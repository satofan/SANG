<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>SANG - Повышение</title>
</head>
<body>
    <nav class="navigation">
        <a href="index.html" class="logo">National Guard</a>
        <ul class="navigation-holder">
          <li class="nav-links">
              <a href="academy.html">Academy</a>
          </li>
          <li class="nav-links">
              <a href="kmb.html">КМБ</a>
          </li>
          <li class="nav-links">
              <a href="military_academy.html">Military Academy</a>
          </li>
          </nav>
    <form id="webhookForm">
<div class="center">
        <div class="form-group">
            <h2 style="height: 50px; margin-top: 20px;">Отчёт на повышение КМБ</h2>
            <p>Имя Фамилия</p>
            <input type="text" id="one" name="one" value="" class="form-group-input kmb">
        </div>
        <div class="form-group">
            <p>Отстоять на КПП 1 Час. Или 3 поставки</p>
            <input type="text" id="three" name="three" value="" class="form-group-input kmb">
        </div>
        <div class="form-group">
            <p>Принять участие в 1 наборе или 1 поставке</p>
            <input type="text" id="four" name="four" value="" class="form-group-input kmb">
        </div>
        <button type="submit" class="submite kmb">Отправить заявку</button>
    </form>
</div>

    <script>
        document.getElementById('webhookForm').addEventListener('submit', async (event) => {
    event.preventDefault();

    const one = document.getElementById('one').value;
    const three = document.getElementById('three').value;
    const four = document.getElementById('four').value;


    if (!one || !three || !four) {
        alert('Пожалуйста, заполните все поля.');
        return;
    }

    const payload = {
        content: '<@&1086341976988860456>',
        embeds: [
            {
                title: 'Новая заявка! От КМБ!',
                color: 15630619,
                fields: [
                    {
                        name: 'Имя Фамилия',
                        value: one,
                        inline: false
                    },
                    {
                        name: 'День',
                        value: 'Третий',
                        inline: false
                    },
                    {
                        name: 'Отстоять на КПП 1 Час. Или 3 поставки.',
                        value: three,
                        inline: false
                    },
                    {
                        name: 'Принять участие в 1 наборе или 1 поставке',
                        value: four,
                        inline: false
                    }
                    
                ],
                "footer": {
                        "text": "By Satofan"
                    }
            }
        ]
    };

    try {
        const response = await fetch('https://discord.com/api/webhooks/1212102369001607179/_eWGTyHnBCUSZQ_eQ8NwwL5PaaKMTXw4-AuXqN5pU0kL8pq1vDTxnkikKpZX38I72wYY', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        });

        if (!response.ok) {
            throw new Error('Ошибка при отправке заявки');
        }

        alert('Заявка успешно отправлена!');

        // Очистка полей формы
        document.getElementById('one').value = '';
        document.getElementById('three').value = '';
        document.getElementById('four').value = '';

    } catch (error) {
        console.error('Ошибка:', error);
        alert('Произошла ошибка при отправке заявки. Пожалуйста, попробуйте еще раз.');
    }
});
    </script>
</body>
</html>